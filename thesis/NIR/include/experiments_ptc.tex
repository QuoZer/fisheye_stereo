
\subsection{С чем сравниваем}  % понятие облака точек не введено, поверхность какая? 

Результатом работы алгоритма стереозрения является карта глубины воспринимаемого пространства. Подобные карты могут
использоваться, например, алгоритмами навигации и локализации для построения карты окружения робота. Точность работы 
этих алгоритмов зависит от того, насколько точно карта глубины передаёт реальную информацию о форме объектов. Оценить 
эту характеристику для отдельной системы стереозрения проблематично, так как она зависит от множества факторов...
Поэтому оценка пригодности для применения системы в реальности проведена в сравнении с виртуальной моделью традиционной
стереопары.

Виртуальная модель позволяет разместить сразу несколько объектов в одной точке пространства, таким образом возможно
в существующую модель в Unity добавить ещё 2 камеры, совпадающие по параметрам и положению с виртуальными камерами на 
рисунке \ref{pic:2cam_scheme}. Разрешение этих камер выбрано исходя из размеров проекции $\nu_i$ области интереса на широкоугольном
снимке. Для камер "рыбий глаз" с разрешением $1080*1080$ пикселей она составляет 287482 пикселей, что аналогично камере 
с разрешением $540*540$.  В результате получена эталонная стереопара для сравнения. % TODO: чувствуется какая-то недосказанность

\subsection{Оценка качества устранения искажений}

Не уверен, что это стоит выносить в отдельный раздел. Вписывается не очень, надо переписывать подводку
\\
\\
Добавление в виртуальную модель эталонной камеры позволяет оценить качество устранения искажений путём сравнения
её снимков со снимками виртуальной камеры-обскуры модуля устранения искажений. % FIXME: никакой "модуль..." ранее не вводился, нужно переписать

Параметры полинома \ref{eqn:scaramuzza} для устранения искажений получены с помощью MATLAB Camera Calibrator и занесены 
в код библиотеки обработки изображений. % FIXME: опять-таки будто про OpenCV речь, надо как-то ссылаться на свой алгоритм\модуль
Снимки после устранения искажений и с эталонной камеры показаны на рисунке \ref{pic:2images_compar}.

\addtwoimghere{fy_house}{0.5}{reg_house}{0.5}{Слева - снимок после устранения искажений; справа - эталонный снимок}{pic:2images_compar}




\subsection{Оценка отклонения облака точек от поверхности}  % понятие облака точек не введено, поверхность какая? 

В качестве целевой поверхности выбрана виртуальная плоскость с нанесённой на неё текстурой высоко разрешения. Размеры и
положение плоскости относительно камер известно с высокой точностью, что позволяет сравнить результаты стереореконструкции
с реальным положением целевого объекта и оценить ошибку. В качестве метрики оценки выбрано среднее квадратичное отклонение
положения точек от модели плоскости. 

Исследования проведены в MATLAB, снимки получены с помощью виртуальной модели. Сначала для обеих стереопар проводится
калибровка по снимкам узора шахматной доски с помощью методики \cite{stereo_calib}, что позволяет получить 
внутренние и внешние параметры камер. % FIXME: ну вообще они у нас как бы есть. Мб сравнить ещё оценки с реальными 
Далее происходит построение карты расхождений \cite{SGBM} и 3D-реконструкция сцены. Результирующее облако точек 
представлено на рисунке
\ref{pic:raw_pointcloud}.

\addimghere{sample}{0.7}{Неочищенное облако точек}{pic:raw_pointcloud}
% TODO: сюда можно и картинку после обработки поинтклауда \addtwoimghere{}{}{}{}{}
По заданным параметрам строится модель целевой плоскости, а точки за пределами её окрестности удаляются. % FIXME: размеры окрестности
Затем скрипт перебирает все оставшиеся точки и рассчитывает среднее квадратичное отклонение. Код скрипта приведён
 в приложении \ref{app:matlab}.

Описанный алгоритм применён к снимкам целевой плоскости на разных расстояниях с эталонной и исследуемой стереопар.
Результаты приведены на графике \ref{plot:MSE_compar}.

\addimghere{sample}{1.0}{График среднеквадратичной ошибки в зависимости от расстояния для эталонной и исследуемой стереопар}

Как видно из графика, ошибка оценки поверхности в исследуемой системе в среднем в два раза больше этого показателя для
традиционной стереопары. Тем не менее она остаётся в пределах $3\%$ от реального расстояния.  % FIXME: хммммм, как-то уж больно хорошо

Меньшая точность исследуемой системы связана с аберрацией по краям изображений, которая по-разному влияет на интенсивность 
пикселей на левом и правом снимках. Неидеальность устранения искажений также приводит к менее надёжному сопоставлению. 

%MSE			
%4m	5m	7.5m	10m	12.5m	15m
%Ref	0,4	0,500	0,750	1,000	1,250	1,500
%FY	0,0068	0,01010	0,0154	0,02360	0,0237	0,02960
%REG	0,0043	0,00520	0,00760	0,01020	0,0081	0,01510
%1,70%	2,02%	2,05%	2,36%	1,90%	1,97%
%1,08%	1,04%	1,01%	1,02%	0,65%	1,01%
