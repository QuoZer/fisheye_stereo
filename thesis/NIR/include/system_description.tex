\subsection{Описание системы стереозрения}

Предлагаемая система стереозрения состоит из двух камер с объективами типа "рыбий глаз" $\geqslant 180^\circ$,
расположенных ортогонально. В таком случае поля зрения соседних камер могут пересекаться, 
образуя  области, точки пространства в которых видны на обеих камерах. Это позволяет получить информацию о 
глубине в указанных областях. % FIXME: Всё описание просто бггг

Робот-доставщик "Ровер R3"  компании Яндекс имеет на борту 4 сверхширокоугольные камеры, размещённых спереди, сзади и по бортам 
корпуса \cite{yandex_rover}, что позволяет рассмотреть принцип работы системы стереозрения на его примере. На рисунке \ref{pic:4cam_system} 
представлено сравнение систем стереозрения. Слева изображена схема зон (обозначены зелёным), в которых обеспечивается получение информации о глубине
 при использовании описываемой системы, а справа эквивалентная по горизонтальному  покрытию схема при использовании обычных камер 
 с углом обзора $90^\circ$. 
 
%\addtwoimghere{Group 1}{0.4}{Group 2}{0.4}{Сравнение систем стереозрения}{pic:4cam_system}  % TODO: разобраться с масштабом
\addimghere{group12}{0.7}{Геометрическая модель бинокулярной системы стереозрения}{pic:2cam_scheme}

Как можно заметить, системе на основе обычных камер нужно в два раза больше сенсоров, чтобы достичь той же зоны покрытия 
по горизонтали.  Кроме того, традиционная система имеет меньшую зону покрытия по вертикали и не обеспечивает полный 
панорамный обзор. Все эти факторы делают систему стереозрения на основе ортогонально расположенных сверхширокоугольных камер 
более предпочтительной для применения в робототехнике.  % FIXME: уточнить. не во всей не всегда 

Применение традиционных алгоритмов стереозрения предполагает наличие стереопары - двух камер с известным взаимным положением,   % FIXME: meh как-то абзац теперь не на своём месте будто. Переформулировать наверное стоит
наблюдающих  одну область пространства с разных ракурсов. Описанный в предыдущей секции метод  устранения искажений 
сверхширокоугольной камеры позволяет создавать виртуальные камеры-обскуры и регулировать их направление обзора. Таким образом,
стереопару можно сформировать из двух таких виртуальных камер.  %параллельно биссектрисе угла, образованного пересечением полей зрения fisheye-камер. 
Далее для упрощения рассмотрения системы будет считаться, что оптические оси всех камер находятся в одной плоскости, 
а на ориентацию виртуальных камер влияет только один угол. % FIXME: Какой? ...только угол в этой плоскости? ...угол рыскания? 

На рисунке \ref{pic:2cam_scheme} изображён вариант системы с двумя камерами под углом $90^\circ$, соответствующий фрагменту схемы,     
  представленной на рисунке \ref{pic:4cam_system}. 

\addimghere{sample_simple2cam}{0.7}{Геометрическая модель бинокулярной системы стереозрения}{pic:2cam_scheme} %TODO: перерисовать схему?

  Здесь у полей зрения камер $C_0$ и $C_1$ есть область пересечения, обозначенная красным. 
Эта область эквивалентна области пересечения полей зрения двух камер с полями зрения $90^\circ$ (обозначены
оранжевым), повёрнутых на $45^\circ$ в сторону области интереса. В таком случае $B$ - база стереопары.
Примеры изображений, полученных в такой конфигурации, изображены на рисунке \ref{pic:dewarped_exmples}. 

\addimghere{4pic_example}{0.7}{Пример исходных изображений с отмеченной областью интереса и снимков виртуальной стереопары}{pic:dewarped_exmples}

